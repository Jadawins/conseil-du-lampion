<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Combat Joueur â€“ Le Conseil du Lampion</title>
  <link rel="stylesheet" href="css/theme.css"/>
  <link rel="stylesheet" href="css/ui.css"/>
  <link rel="stylesheet" href="css/animation.css">
</head>
<body data-theme="dark">
    <!-- ğŸŒ— Appliquer le thÃ¨me dÃ¨s le chargement -->
    <script>
        if (localStorage.getItem("theme") === "light") {
          document.body.setAttribute("data-theme", "light");
        } else {
          document.body.setAttribute("data-theme", "dark");
        }
        </script>
    
        <!-- ğŸŒ™ Toggle thÃ¨me clair/sombre -->
        <div class="theme-toggle-container">
          <button id="theme-toggle" class="lanterne-btn">
            <img
              id="lanterne-icon"
              src="assets/img/lumiere.png"
              alt="Changer de thÃ¨me"
              width="48"
              height="48"
            />
          </button> 
        </div>
  <main>
    <h1>ğŸ§ Combat en cours</h1>

    <div class="sprite-knight"></div>

    <!-- ğŸ©¸ Section PV joueur -->
    <section id="pv-joueur">
      <h2>â¤ï¸ Vos PV</h2>
      <p id="pv-affichage">Chargement...</p>
    </section>

    <section id="tour-joueur" class="card-section">
        <h2>â³ Tour actuel</h2>
        <div class="card-highlight">
            <p id="message-tour" class="highlight-text">Chargement...</p>
        </div>
      </section>
      <section id="attente-section" style="display: none;">
        <p>â³ Veuillez patienter, ce nâ€™est pas encore votre tour...</p>
      </section>

    <section id="ordre-combat">
        <h2>ğŸ“œ Ordre d'initiative</h2>
        <table id="ordre-combat" class="combat-table journal-combat">
          <thead>
            <tr><th>Nom</th><th>Initiative</th><th>PV</th></tr>
          </thead>
            <tbody id="liste-initiative"></tbody>
            </table>
      </section>

      <section id="fin-combat-joueur" class="card-section hidden">
        <h2 id="message-fin-combat-joueur"></h2>
      </section>

      <section id="actions-joueur" style="display: none;">
        <h2>ğŸ® Vos actions</h2>
        <div class="action-buttons">
          <button class="btn-style" id="btn-attaquer">âš”ï¸ Attaquer</button>
          <button class="btn-style" id="btn-soigner">â¤ï¸â€ğŸ©¹ Soigner</button>
          <button class="btn-style" id="btn-passer">â¡ï¸ Passer le tour</button>
        </div>
        <p id="feedback-message" class="message-flash"></p>
      </section>

      <div id="formulaire-soin" class="hidden">
        <h3>ğŸ©¹ Action de soin</h3>
        
        <label for="cible-soin">Choisir une cible :</label>
        <select id="cible-soin">
          <!-- Options ajoutÃ©es dynamiquement en JS -->
        </select>
      
        <label for="valeur-soin">Nombre de PV Ã  rendre :</label>
        <input type="number" id="valeur-soin" min="1" required />
      
        <div class="form-buttons">
          <button class="btn-style" id="valider-soin">âœ… Valider</button>
          <button class="btn-style btn-rouge" id="annuler-soin">âŒ Annuler</button>
        </div>
      </div>
      
      <div id="confirmation-soin" class="card-confirm hidden">
        <p id="texte-confirmation-soin"></p>
        <div class="form-buttons">
          <button class="btn-style" id="confirmer-soin">âœ… Confirmer</button>
          <button class="btn-style btn-rouge" id="annuler-confirmation">âŒ Annuler</button>
        </div>
      </div>

      <div id="formulaire-attaque" class="hidden">
        <h3>âš”ï¸ Action d'attaque</h3>
      
        <label for="cible-attaque">Choisir une cible :</label>
        <select id="cible-attaque"></select>
      
        <label for="valeur-attaque">Nombre de dÃ©gÃ¢ts Ã  infliger :</label>
        <input type="number" id="valeur-attaque" min="1" required />
      
        <div class="form-buttons">
          <button class="btn-style" id="valider-attaque">âœ… Valider</button>
          <button class="btn-style btn-rouge" id="annuler-attaque">âŒ Annuler</button>
        </div>
      </div>
  </main>
  

  <div class="bottom-nav">
    <a href="index.html" class=".btn-accueil-bottom">ğŸ  Accueil</a>
  </div>

  <script src="js/theme.js"></script>
  <script src="js/joueur-bagarre.js"></script>

</body>
</html>
